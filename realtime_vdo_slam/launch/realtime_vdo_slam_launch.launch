<launch>

  <!-- If True expects topics directly from the vdo_slam_preprocessing node. This results in a remapping -->
  <arg name="online" default="false" />

   <!-- If True VDO will load the System parameters from the calibtration file in the config folder
   If False, will use the calibration params defined here and the specified camera info topic  -->
  <arg name="use_calibtration_file" default="true" />

  <!-- System params for VDO SLAM. Used if  use_calibtration_file is true-->
	<arg name="calibtration_file" default="realtime_vdo.yaml"/>

  <!-- Empty string ("") means no ground-truth available. Used for init if
   requested to do ground-truth initialization. -->
  <arg name="odometry_ground_truth_topic"       default=""/>

  <!-- Frame IDs -->
  <arg name="map_frame_id"       default="vdomap"/>
  <arg name="odom_frame_id"     default="vdoodom"/>
  <arg name="base_link_frame_id" default="vdobase_link"/>


  <!-- <param name="frame_id" value="vdo_camera_link" />
  <param name="global_optim_trigger" value="100" /> -->

  <group ns="mask_rcnn_interface">
    <param name="coco_dataset" value="ms_coco_classnames.json" />
  </group>

  <node pkg="realtime_vdo_slam" type="ros_vdoslam_node" name="ros_vdoslam" output="screen">

    <param name="online" value="$(arg online)" />


    <!-- Remap if needed from vdo generated topics to vdo_slam expected topics. These are the same as the ImageProcessing node. Remapping used 
    if online -->
    <remap to="/vdoslam/input/camera/rgb/image_raw" from="/camera/rgb/image_raw" if="$(arg online)"/>
    <remap to="/vdoslam/input/camera/mask/image_raw" from="/camera/mask/image_raw" if="$(arg online)"/>
    <remap to="/vdoslam/input/camera/flow/image_raw" from="/camera/flow/image_raw" if="$(arg online)"/>
    <remap to="/vdoslam/input/camera/depth/image_raw" from="/camera/depth/image_raw" if="$(arg online)"/>

    <param name="use_calibtration_file" value="$(arg use_calibtration_file)"/>

    <!-- System params for VDO SLAM. Used if  use_calibtration_file is true-->
    <param name="calibtration_file" value="$(arg calibtration_file)"/>
    <rosparam command="load" file="$(find realtime_vdo_slam)/config/$(arg calibtration_file)" if="$(arg use_calibtration_file)"/>

    <!-- Empty string ("") means no ground-truth available. Used for init if
    requested to do ground-truth initialization. -->
    <param name="odometry_ground_truth_topic"       value="$(arg odometry_ground_truth_topic)"/>

    <!-- Frame IDs -->
    <param name="map_frame_id"        value="$(arg map_frame_id)"/>
    <param name="odom_frame_id"      value="$(arg odom_frame_id)"/>
    <param name="base_link_frame_id"  value="$(arg base_link_frame_id)"/>


  </node>
</launch>